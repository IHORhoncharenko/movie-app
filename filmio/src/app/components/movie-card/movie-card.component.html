<p-card>
  <ng-template pTemplate="header">
    <img
      (click)="openMovieCard()"
      fetchpriority="high"
      decoding="async"
      alt="movieData.title"
      [src]="urlPoster"
    />
    <hgroup>
      <h2>{{ movieData.title }}</h2>
      <p>{{ movieData.release_date }}</p>
    </hgroup>
  </ng-template>

  <div class="card__rating rating">
    <p-rating
      (mouseleave)="mouseover()"
      (mouseenter)="mouseenter()"
      stars="5"
      [(ngModel)]="value"
      [readonly]="true"
      [cancel]="false"
    />
    @if (isShowRating) {
      <p-badge class="rating__badge" [value]="movieData.vote_average" />
    }
  </div>

  <ng-template pTemplate="footer">
    <div class="card__action">
      <p-button (click)="showDialog()" label="Show detailse" />

      <p-dialog
        class="card__action modal"
        (mouseenter)="showLink()"
        (mouseleave)="hideLink()"
        [header]="movieData.title"
        [modal]="true"
        [(visible)]="isVisible"
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
      >
        <p-button (click)="openMovieCard()">Go to film</p-button>
        <dl class="modal__content">
          <dt>Original title</dt>
          <dd>{{ movieData.original_title }}</dd>
          <dt>Recommended age for watching</dt>
          @if (isFamilyFriendly) {
            <dd>0+</dd>
          } @else {
            <dd>18+</dd>
          }
          <dt>ID</dt>
          <dd>{{ movieData.id }}</dd>
          <dt>Language</dt>
          <dd>{{ movieData.original_language }}</dd>
          <dt>Overview</dt>
          <dd>{{ movieData.overview }}</dd>
        </dl>
      </p-dialog>
    </div>

    <div class="card__tags">
      @for (genre of movieData.genre; track movieData.id) {
        <p-tag [value]="genre" />
      }
    </div>
  </ng-template>
</p-card>
